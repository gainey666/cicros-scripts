<?xml version="1.0" encoding="utf-8"?>
<Professionbuddy>
  <!--Intro-->
  <CustomAction Code="Log(System.Drawing.Color.DarkOliveGreen,&quot;Welcome to [PB - A] 1-525 Cooking and Fishing by Cicrocoft v2.0&quot;);" />
  <CustomAction Code="Lua.DoString(&quot;SetCVar(\&quot;AutoLootDefault\&quot;, 1)&quot;);" />
  <If Condition="ObjectManager.Me.HearthstoneAreaId != 69 &amp;&amp; Me.MapId == 0 &amp;&amp; Cooking.Level &gt; 300 &amp;&amp; Me.IsAlliance || ObjectManager.Me.HearthstoneAreaId != 222 &amp;&amp; Me.MapId == 1 &amp;&amp; Me.IsHorde" IgnoreCanRun="True">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Seems like our Hearthstone not are set for Lakeshire.. Lets do that before we do anything else.&quot;); " />
      <If Condition="DistanceTo (-9254.536, -2147.145, 64.07043) &gt; 40" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9254.536, -2147.145, 64.07043" />
      </If>
      <While Condition="DistanceTo (-9254.536, -2147.145, 64.07043) &lt; 40 &amp;&amp; ObjectManager.Me.HearthstoneAreaId != 69" IgnoreCanRun="True">
        <ChangeBotAction BotName="Questing" />
        <LoadProfileAction ProfileType="Honorbuddy" Path="HBProfiles\[A - Cooking]Set_HS.xml" />
        <If Condition="ObjectManager.Me.HearthstoneAreaId == 69" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;The hearthstone is now set for Lakeshire, lets level some fishing and cooking&quot;); " />
          <ChangeBotAction BotName="Combat Bot" />
          <LoadProfileAction ProfileType="Professionbuddy" Path="[PB - N] 1-525 Cooking-Fishing [Cicrocoft].xml" />
        </If>
      </While>
      <If Condition="ObjectManager.Me.HearthstoneAreaId == 69" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;The hearthstone is now set for Lakeshire, lets level some fishing and cooking&quot;); " />
        <ChangeBotAction BotName="Combat Bot" />
        <LoadProfileAction ProfileType="Professionbuddy" Path="[PB - A] 1-525 Cooking-Fishing [Cicrocoft].xml" />
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Seems like our Hearthstone not are set for Bloodhoof Village.. Lets do that before we do anything else.&quot;); " />
      <If Condition="DistanceTo (-2328.344, -366.3402, -8.755398) &gt; 40" IgnoreCanRun="True">
        <FlyToAction Dismount="False" Location="-2328.344, -366.3402, -8.755398" />
        <MoveToAction Location="-2363.075, -348.9611, -8.956995" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      </If>
      <While Condition="DistanceTo (-2363.075, -348.9611, -8.956995) &lt; 5 &amp;&amp; ObjectManager.Me.HearthstoneAreaId != 222" IgnoreCanRun="True">
        <ChangeBotAction BotName="Questing" />
        <LoadProfileAction ProfileType="Honorbuddy" Path="HBProfiles\[H - Cooking]Set_HS.xml" />
        <If Condition="ObjectManager.Me.HearthstoneAreaId == 222" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;The hearthstone is now set for Bloodhoof Village, lets level some fishing and cooking&quot;); " />
          <ChangeBotAction BotName="Combat Bot" />
          <LoadProfileAction ProfileType="Professionbuddy" Path="[PB - N] 1-525 Cooking-Fishing [Cicrocoft].xml" />
        </If>
      </While>
    </If>
  </If>
  <If Condition="TreeRoot.Current.Name != &quot;Combat Bot&quot;" IgnoreCanRun="True">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Changing bot to Combat Bot&quot;); " />
    <ChangeBotAction BotName="Combat Bot" />
  </If>
  <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
    <If Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.DarkOliveGreen,&quot;Looks like we can train our fishing skill&quot;);" />
    </If>
    <If Condition="Fishing.MaxLevel == 0" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.DarkOliveGreen,&quot;We dont know fishing, lets go learn it!&quot;);" />
    </If>
    <CallSubRoutine SubRoutineName="TrainFishing" />
  </While>
  <CallSubRoutine SubRoutineName="EquipFishingPole" />
  <While Condition="Cooking.MaxLevel &lt; 1" IgnoreCanRun="True">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I don't know cooking. Going to learn it&quot;); " />
    <CallSubRoutine SubRoutineName="TrainCooking" />
  </While>
  <CallSubRoutine SubRoutineName="BuyRecipe" />
  <CallSubRoutine SubRoutineName="LearnRecipe" />
  <!--Subs-->
  <SubRoutine SubRoutineName="TrainFishing">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.ZoneId == 12 || Me.ZoneId == 1519 || Me.ZoneId == 44 || Me.ZoneId == 4" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in near Goldshire.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-9382.077, -117.0054, 58.77687) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-9382.722, -119.8093, 56.22465" />
          </If>
          <TrainSkillAction NpcEntry="1651" Location="-9382.077, -117.0054, 58.77702" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 11 || Me.ZoneId == 28 || Me.ZoneId == 139" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Menethill Harbor.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-3763.51, -723.533, 2.00382) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-3760.027, -725.1077, 1.920412" />
          </If>
          <TrainSkillAction NpcEntry="3179" Location="-3763.51, -723.533, 2.00382" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Feathermoon Stronghold.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-4286.39, 2297.86, 9.480977) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-4286.39, 2297.86, 9.480977" />
          </If>
          <TrainSkillAction NpcEntry="7946" Location="-4286.39, 2297.86, 9.480977" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.MapId == 571" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Valiance Keep.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (2187.225, 5234.346, 10.57377) &gt; 45" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="2187.225, 5234.346, 10.57377" />
          </If>
          <TrainSkillAction NpcEntry="26993" Location="2144.236, 5234.324, 19.44625" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 5861" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train at the Darkmoon Faire.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <TrainSkillAction NpcEntry="56068" Location="-4421.531, 6289.183, 13.89897" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <If Condition="Me.ZoneId == 331" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Zoram'gar Outpost.&quot;); " />
          <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
            <If Condition="DistanceTo (3165.535, -1076.071, 629.2462) &gt; 30" IgnoreCanRun="True">
              <FlyToAction Dismount="False" Location="3165.535, -1076.071, 629.2462" />
            </If>
            <TrainSkillAction NpcEntry="12961" Location="3377.751, 1074.242, 1.765229" />
          </While>
        </If>
        <If Condition="Me.ZoneId != 331" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Bloodhoof Village.&quot;); " />
          <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
            <If Condition="DistanceTo (-2350.511, -238.7157, -8.389613) &gt; 30" IgnoreCanRun="True">
              <FlyToAction Dismount="False" Location="-2350.511, -238.7157, -8.389613" />
            </If>
            <TrainSkillAction NpcEntry="5938" Location="-2350.511, -238.7157, -8.389613" />
          </While>
          <WaitAction Condition="false" Timeout="2000" />
        </If>
      </If>
      <If Condition="Me.MapId == 571" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Valiance Keep.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (2187.225, 5234.346, 10.57377) &gt; 45" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="2187.225, 5234.346, 10.57377" />
          </If>
          <TrainSkillAction NpcEntry="26993" Location="2144.236, 5234.324, 19.44625" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 5861" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train at the Darkmoon Faire.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <TrainSkillAction NpcEntry="56068" Location="-4421.531, 6289.183, 13.89897" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train fishing. Going to train in Bloodhoof Village.&quot;); " />
        <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 || Fishing.MaxLevel == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-2350.511, -238.7157, -8.389613) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-2350.511, -238.7157, -8.389613" />
          </If>
          <TrainSkillAction NpcEntry="5938" Location="-2350.511, -238.7157, -8.389613" />
        </While>
        <WaitAction Condition="false" Timeout="2000" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="TrainCooking">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.ZoneId == 44 || Me.ZoneId == 12 || Me.ZoneId == 1519" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Lake Everstill town.&quot;); " />
        <If Condition="DistanceTo (-9204.802, -2065.223, 78.08831) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-9229.114, -2067.764, 76.97263" />
        </If>
        <WaitAction Condition="false" Timeout="2000" />
        <TrainSkillAction NpcEntry="3087" Location="-9204.802, -2065.223, 78.08831" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 28" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Kharanos.&quot;); " />
        <If Condition="DistanceTo (-5594.47, -545.82, 398.7681) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-5600.912, -485.818, 397.1074" />
        </If>
        <TrainSkillAction NpcEntry="1699" Location="-5594.47, -545.82, 398.7681" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Kharanos.&quot;); " />
        <TrainSkillAction NpcEntry="1699" Location="-5594.47, -545.82, 398.7681" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.MapId == 530" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Lower City.&quot;); " />
        <If Condition="DistanceTo (-2065.71, 5311.151, -37.32356) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-2082.622, 5332.535, -36.75254" />
        </If>
        <TrainSkillAction NpcEntry="19185" Location="-2065.71, 5311.151, -37.32356" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.MapId == 571 &amp;&amp; Me.ZoneId != 4395" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Valiance Keep.&quot;); " />
        <If Condition="DistanceTo (2147.999, 5231.634, 19.44573) &gt; 45" IgnoreCanRun="True">
          <FlyToAction Dismount="False" Location="2187.225, 5234.346, 10.57377" />
        </If>
        <TrainSkillAction NpcEntry="26989" Location="2147.999, 5231.634, 19.44573" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <If Condition="Me.ZoneId == 4395" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Dalaran.&quot;); " />
        <If Condition="DistanceTo (5707.724, 714.7145, 642.4741) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="5737.577, 673.0076, 645.2578" />
        </If>
        <TrainSkillAction NpcEntry="28705" Location="5707.724, 714.7145, 642.4741" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need to train cooking. Going to train in Bloodhoof Village.&quot;); " />
        <CallSubRoutine SubRoutineName="EnterBV" />
        <TrainSkillAction NpcEntry="3067" Location="-2263.261, -284.9409, -9.424675" />
        <CallSubRoutine SubRoutineName="LeaveBV" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="CreateFood">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.ZoneId == 4395" IgnoreCanRun="True">
        <If Condition="DistanceTo (5700.841, 717.2857, 642.4707) &gt; 3" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets find a place to cook! Going to Dalaran&quot;); " />
        </If>
        <If Condition="DistanceTo (5700.841, 717.2857, 642.4707) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="5737.577, 673.0076, 645.2578" />
        </If>
        <If Condition="DistanceTo (5700.841, 717.2857, 642.4707) &gt; 3" IgnoreCanRun="True">
          <MoveToAction Location="5700.841, 717.2857, 642.4707" MoveType="Location" Pathing="Navigator" Entry="0" />
        </If>
      </If>
      <If Condition="Me.MapId == 571 &amp;&amp; Me.ZoneId != 4395" IgnoreCanRun="True">
        <If Condition="DistanceTo (3002.291, 4052.824, 26.36718) &gt; 3" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets find a place to cook! Going to Unu'pe&quot;); " />
        </If>
        <If Condition="DistanceTo (3002.291, 4052.824, 26.36718) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="3007.017, 4074.656, 26.3126" />
        </If>
        <If Condition="DistanceTo (3002.291, 4052.824, 26.36718) &gt; 3" IgnoreCanRun="True">
          <MoveToAction Location="3002.291, 4052.824, 26.36718" MoveType="Location" Pathing="Navigator" Entry="0" />
        </If>
      </If>
      <If Condition="Me.MapId == 530" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets find a place to cook! Going to Lower City&quot;); " />
        <If Condition="DistanceTo (-2065.71, 5311.151, -37.32356) &gt; 30" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-2082.622, 5332.535, -36.75254" />
        </If>
        <MoveToAction Location="-2070.231, 5318.514, -37.32351" MoveType="Location" Pathing="Navigator" Entry="0" />
      </If>
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Eastern Kingdom to cook. We have no more business on Kalimdor.&quot;); " />
        <CallSubRoutine SubRoutineName="Kalimdor to EK" />
        <If Condition="Me.MapId == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-9207.701, -2065.184, 78.0983) &gt; 30" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to cook in Lake Everstill Town. So quiet there.&quot;); " />
            <If Condition="DistanceTo (-9207.701, -2065.184, 78.0983) &gt; 500" IgnoreCanRun="True">
              <CallSubRoutine SubRoutineName="LakeshireHS" />
            </If>
            <FlyToAction Dismount="True" Location="-9229.114, -2067.764, 76.97263" />
          </If>
          <If Condition="DistanceTo (-9207.701, -2065.184, 78.0983) &gt; 2" IgnoreCanRun="True">
            <MoveToAction Location="-9207.701, -2065.184, 78.0983" MoveType="Location" Pathing="Navigator" Entry="0" />
          </If>
        </If>
      </If>
      <If Condition="Me.MapId == 0" IgnoreCanRun="True">
        <If Condition="DistanceTo (-9207.701, -2065.184, 78.0983) &gt; 50" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to cook in Lake Everstill Town. So quiet there.&quot;); " />
          <CallSubRoutine SubRoutineName="LakeshireHS" />
          <FlyToAction Dismount="True" Location="-9229.114, -2067.764, 76.97263" />
        </If>
        <If Condition="DistanceTo (-9207.701, -2065.184, 78.0983) &gt; 2" IgnoreCanRun="True">
          <MoveToAction Location="-9207.701, -2065.184, 78.0983" MoveType="Location" Pathing="Navigator" Entry="0" />
        </If>
      </If>
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <If Condition="DistanceTo (-2173.634, -392.3203, -3.599042) &gt; 50" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to cook in Bloodhoof Village. So quiet there.&quot;); " />
          <If Condition="DistanceTo (-2173.634, -392.3203, -3.599042) &gt; 500" IgnoreCanRun="True">
            <CallSubRoutine SubRoutineName="BVHS" />
          </If>
          <FlyToAction Dismount="True" Location="-2173.634, -392.3203, -3.599042" />
        </If>
        <If Condition="DistanceTo (-2173.634, -392.3203, -3.599042) &gt; 5" IgnoreCanRun="True">
          <MoveToAction Location="-2173.634, -392.3203, -3.599042" MoveType="Location" Pathing="Navigator" Entry="0" />
        </If>
      </If>
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="EquipFishingPole">
    <If Condition="Me.Inventory.Equipped.MainHand == null || Me.Inventory.Equipped.MainHand.ItemInfo.WeaponClass != WoWItemWeaponClass.FishingPole" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets equip fishing pole&quot;); " />
      <CustomAction Code="var1 = Me.BagItems.FirstOrDefault(i =&gt; i.ItemInfo.WeaponClass == WoWItemWeaponClass.FishingPole);" />
      <!--We have a fishing pole in bags, use it.-->
      <If Condition="var1 != null" IgnoreCanRun="True">
        <CustomAction Code="((WoWItem)var1).UseContainerItem();" />
      </If>
      <!--No fishing pole in bags, lets go buy one.-->
      <If Condition="var1 == null" IgnoreCanRun="True">
        <If Condition="Me.IsAlliance" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-8800.812, 767.9769, 96.33873" />
          <BuyItemAction NpcEntry="5494" Location="-8800.812, 767.9769, 96.33873" ItemID="6256" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
          <WaitAction Condition="false" Timeout="3000" />
          <CustomAction Code="Lua.DoString(&quot;EquipItemByName(6256)&quot;);" />
        </If>
        <If Condition="Me.IsHorde" IgnoreCanRun="True">
          <CallSubRoutine SubRoutineName="EnterBV" />
          <BuyItemAction NpcEntry="3081" Location="-2267.63, -324.007, -9.424868" ItemID="6256" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
          <WaitAction Condition="false" Timeout="3000" />
          <CallSubRoutine SubRoutineName="LeaveBV" />
          <CustomAction Code="Lua.DoString(&quot;EquipItemByName(6256)&quot;);" />
        </If>
      </If>
    </If>
    <WaitAction Condition="false" Timeout="2000" />
  </SubRoutine>
  <SubRoutine SubRoutineName="Sell">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to clean the bags!&quot;); " />
    <If Condition="Cooking.Level &gt;= 175" IgnoreCanRun="True">
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290" Count="0" />
    </If>
    <If Condition="Cooking.Level &gt;= 275" IgnoreCanRun="True">
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758" Count="0" />
    </If>
    <If Condition="Cooking.Level &gt;= 300" IgnoreCanRun="True">
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758,13935,13889" Count="0" />
    </If>
    <If Condition="Cooking.Level &gt;= 325" IgnoreCanRun="True">
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="27674,27655,30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758,13935,13889" Count="0" />
    </If>
    <If Condition="Cooking.Level &gt;= 350" IgnoreCanRun="True">
      <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="27666,27438,27674,27655,30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758,13935,13889" Count="0" />
    </If>
    <If Condition="Cooking.Level &gt;= 435" IgnoreCanRun="True">
      <While Condition="InbagCount(36781) &gt;= 1" IgnoreCanRun="False">
        <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Darkwater Clam&quot;), 0);" />
        <WaitAction Condition="false" Timeout="987" />
      </While>
      <If Condition="(bool)Settings[&quot;Auction Meat&quot;]" IgnoreCanRun="True">
        <MoveToAction Location="0, 0, 0" MoveType="NearestVendor" Pathing="Navigator" Entry="0" />
        <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="45932,34759,43268,42942,62790,2595,2596,13446,6149,3827,1710,3385,2455,33567,21153,2678,27699,13886,6311,6310" Count="0" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="CheckCookingSkill">
    <If Condition="Cooking.Level &gt;= Cooking.MaxLevel - 25 &amp;&amp; Cooking.Level &lt; 500" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </If>
    <CallSubRoutine SubRoutineName="LearnRecipe" />
  </SubRoutine>
  <SubRoutine SubRoutineName="CheckFishSkill">
    <If Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 &amp;&amp; Fishing.Level != 525" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainFishing" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="CheckSkill">
    <If Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainFishing" />
    </If>
    <If Condition="Cooking.Level &gt;= Cooking.MaxLevel - 25 &amp;&amp; Cooking.Level &lt; 500" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="DoFishing">
    <While Condition="Fishing.Level &gt;= Fishing.MaxLevel - 25 &amp;&amp; Fishing.Level &lt; 500 &amp;&amp; Fishing.Level != 525" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainFishing" />
    </While>
    <CustomAction Code="Fish();" />
  </SubRoutine>
  <SubRoutine SubRoutineName="UF">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Updating facing, hold on 2 sec&quot;); " />
    <CustomAction Code="WoWMovement.Move(Styx.WoWInternals.WoWMovement.MovementDirection.ForwardBackMovement);" />
    <CustomAction Code="WoWMovement.MoveStop(Styx.WoWInternals.WoWMovement.MovementDirection.ForwardBackMovement);" />
    <WaitAction Condition="false" Timeout="1000" />
  </SubRoutine>
  <SubRoutine SubRoutineName="BuyRecipe">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Cooking.Level &gt;= 1 &amp;&amp; Cooking.Level &lt; 175" IgnoreCanRun="True">
        <If Condition="!HasRecipe(7753) &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets shop some recipes in SW and Goldshire.&quot;); " />
        </If>
        <CallSubRoutine SubRoutineName="EquipFishingPole" />
        <If Condition="!HasRecipe(7751) &amp;&amp; InbagCount (6325) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-8800.812, 767.9769, 96.33873) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-8800.812, 767.9769, 96.33873" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="!HasRecipe(7751) &amp;&amp; InbagCount (6325) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="5494" Location="-8800.812, 767.9769, 96.33873" ItemID="6325" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
        <If Condition="!HasRecipe(7755) &amp;&amp; InbagCount (6330) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-8800.812, 767.9769, 96.33873) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-8800.812, 767.9769, 96.33873" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="!HasRecipe(7755) &amp;&amp; InbagCount (6330) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="5494" Location="-8800.812, 767.9769, 96.33873" ItemID="6330" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
        <If Condition="!HasRecipe(7753) &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-9492.55, 81.4931, 56.2269) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="True" Location="-9492.55, 81.4931, 56.2269" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="!HasRecipe(7753) &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.2269" ItemID="6328" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
        <If Condition="(InbagCount (30817) + InbagCount (2678) + InbagCount (30816)*2) &lt; 150 &amp;&amp; Cooking.Level &lt; 40 &amp;&amp; DistanceTo (-9492.55, 81.4931, 56.2269) &gt; 30" IgnoreCanRun="True">
          <If Condition="Me.IsAlliance" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets buy these supplies for later.&quot;); " />
            <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.22646" ItemID="30817" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
            <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.22646" ItemID="2678" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
          </If>
        </If>
      </If>
      <If Condition="Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 275 &amp;&amp; !HasRecipe(18241) &amp;&amp; InbagCount (13941) == 0" IgnoreCanRun="True">
        <If Condition="!HasRecipe(18241)" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Shopping time. Buying recipes for later use.&quot;); " />
        </If>
        <If Condition="!HasRecipe(18241) &amp;&amp; InbagCount (13941) == 0 || !HasRecipe(20916) &amp;&amp; InbagCount (17062) == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to BB to buy recipe. Hope they like you.&quot;); " />
          <FlyToAction Dismount="False" Location="-14361.75, 434.9416, 7.371971" />
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="!HasRecipe(18241) &amp;&amp; InbagCount (13941) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="2664" Location="-14331.23, 419.2986, 6.626091" ItemID="13941" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <While Condition="!HasRecipe(20916) &amp;&amp; InbagCount (17062) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="2664" Location="-14331.23, 419.2986, 6.626091" ItemID="17062" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290" Count="0" />
          <WaitAction Condition="false" Timeout="1000" />
        </If>
      </If>
      <If Condition="Cooking.Level &gt;= 275 &amp;&amp; Cooking.Level &lt; 325" IgnoreCanRun="True">
        <If Condition="!HasRecipe(18247) &amp;&amp; InbagCount (13949) == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to buy recipe in Ferals.&quot;); " />
          <If Condition="Me.MapId == 0" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We are not on Kalimdor. Going to Wetlands to take the boat. Sit back and enjoy the ride.&quot;); " />
            <CallSubRoutine SubRoutineName="EK to Kalimdor" />
          </If>
          <If Condition="Me.MapId == 1" IgnoreCanRun="True">
            <FlyToAction Dismount="True" Location="-4298.889, 2221.899, 9.411183" />
            <While Condition="InbagCount (13949) == 0" IgnoreCanRun="True">
              <BuyItemAction NpcEntry="7947" Location="-4297.269, 2221.389, 9.4114" ItemID="13949" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
            </While>
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Might aswell clean the bags. Selling greys and fish&quot;); " />
            <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758" Count="0" />
            <WaitAction Condition="false" Timeout="3000" />
          </If>
        </If>
      </If>
      <If Condition="Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 350" IgnoreCanRun="True">
        <If Condition="!HasRecipe(33295) &amp;&amp; (InbagCount(27699) == 0)" IgnoreCanRun="True">
          <If Condition="Me.MapId != 530" IgnoreCanRun="True">
            <CallSubRoutine SubRoutineName="EK to Outland" />
          </If>
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Need Fishstick recipe. Flying to buy it.&quot;); " />
          <FlyToAction Dismount="True" Location="-2943.885, 3998.248, -0.9770461" />
          <While Condition="!HasRecipe(33295) &amp;&amp; (InbagCount(27699) == 0)" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="19296" Location="-2917.881, 4021.484, 0.4274965" ItemID="27699" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
        </If>
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="Cooking.Level &gt;= 1 &amp;&amp; Cooking.Level &lt; 175" IgnoreCanRun="True">
        <If Condition="!HasRecipe(7753) &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets shop some recipes around Mulgore.&quot;); " />
        </If>
        <CallSubRoutine SubRoutineName="EquipFishingPole" />
        <If Condition="!HasRecipe(7755) &amp;&amp; InbagCount (6330) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-1177.187, -65.616, 162.229) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-1177.187, -65.616, 162.229" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="InbagCount (6330) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="3029" Location="-1177.187, -65.616, 162.229" ItemID="6330" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
        <If Condition="(InbagCount (30817) + InbagCount (2678) + InbagCount (30816)*2) &lt; 150 &amp;&amp; Cooking.Level &lt; 40 &amp;&amp; DistanceTo (-9492.55, 81.4931, 56.2269) &gt; 30" IgnoreCanRun="True">
          <If Condition="Me.IsHorde" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets buy these supplies for later.&quot;); " />
            <CallSubRoutine SubRoutineName="EnterBV" />
            <WaitAction Condition="false" Timeout="1000" />
            <BuyItemAction NpcEntry="3081" Location="-2267.63, -324.007, -9.424726" ItemID="30817" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
            <BuyItemAction NpcEntry="3081" Location="-2267.63, -324.007, -9.424726" ItemID="2678" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
            <WaitAction Condition="false" Timeout="1000" />
            <CallSubRoutine SubRoutineName="LeaveBV" />
          </If>
        </If>
        <If Condition="!HasRecipe(7751) &amp;&amp; InbagCount (6325) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-2163.674, -390.267, -3.346734) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-2163.674, -390.267, -3.346734" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="InbagCount (6325) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="5940" Location="-2158.596, -392.9482, -3.030381" ItemID="6325" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
        <If Condition="!HasRecipe(7753) &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
          <If Condition="DistanceTo (-2163.674, -390.267, -3.346734) &gt; 30" IgnoreCanRun="True">
            <FlyToAction Dismount="False" Location="-2163.674, -390.267, -3.346734" />
          </If>
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="InbagCount (6328) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="5940" Location="-2158.596, -392.9482, -3.030381" ItemID="6328" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
        </If>
      </If>
      <If Condition="Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 325 &amp;&amp; !HasRecipe(18247) &amp;&amp; InbagCount (13949) == 0" IgnoreCanRun="True">
        <If Condition="!HasRecipe(18247)" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Shopping time. Buying recipes for later use.&quot;); " />
        </If>
        <If Condition="!HasRecipe(18241) &amp;&amp; InbagCount (13941) == 0 || !HasRecipe(20916) &amp;&amp; InbagCount (17062) == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to BB to buy recipe. Hope they like you.&quot;); " />
          <If Condition="Me.MapId == 1" IgnoreCanRun="True">
            <CallSubRoutine SubRoutineName="Rachet to BB" />
            <WaitAction Condition="false" Timeout="1000" />
          </If>
          <FlyToAction Dismount="True" Location="-14361.75, 433.1123, 7.369685" />
          <WaitAction Condition="false" Timeout="1000" />
          <While Condition="!HasRecipe(18241) &amp;&amp; InbagCount (13941) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="2664" Location="-14331.23, 419.2986, 6.626091" ItemID="13941" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <While Condition="!HasRecipe(20916) &amp;&amp; InbagCount (17062) == 0" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="2664" Location="-14331.23, 419.2986, 6.626091" ItemID="17062" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
          <WaitAction Condition="false" Timeout="1000" />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290" Count="0" />
          <WaitAction Condition="false" Timeout="1000" />
          <CallSubRoutine SubRoutineName="BB to Rachet" />
        </If>
        <If Condition="!HasRecipe(18247) &amp;&amp; InbagCount (13949) == 0" IgnoreCanRun="True">
          <If Condition="Me.MapId == 0" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We are not on Kalimdor. Taking the boat back to Rachet. Sit back and enjoy the ride.&quot;); " />
            <CallSubRoutine SubRoutineName="BB to Rachet" />
          </If>
          <If Condition="Me.MapId == 1" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to buy recipe in Ferals.&quot;); " />
            <FlyToAction Dismount="True" Location="-4385.517, 227.3648, 25.61716" />
            <WaitAction Condition="false" Timeout="1000" />
            <While Condition="!HasRecipe(18247) &amp;&amp; InbagCount (13949) == 0" IgnoreCanRun="True">
              <BuyItemAction NpcEntry="8145" Location="-4346.278, 264.6057, 26.31777" ItemID="13949" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
            </While>
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Might aswell clean the bags. Selling greys and fish&quot;); " />
            <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758" Count="0" />
            <WaitAction Condition="false" Timeout="3000" />
          </If>
        </If>
      </If>
      <If Condition="Cooking.Level &gt;= 275 &amp;&amp; Cooking.Level &lt; 325" IgnoreCanRun="True" />
      <If Condition="Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 350" IgnoreCanRun="True">
        <If Condition="!HasRecipe(33295) &amp;&amp; (InbagCount(27699) == 0)" IgnoreCanRun="True">
          <If Condition="Me.MapId != 530" IgnoreCanRun="True">
            <CallSubRoutine SubRoutineName="EK to Outland" />
          </If>
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Need Fishstick recipe. Flying to buy it.&quot;); " />
          <FlyToAction Dismount="True" Location="-2943.885, 3998.248, -0.9770461" />
          <While Condition="(InbagCount(27699) == 0)" IgnoreCanRun="True">
            <BuyItemAction NpcEntry="19296" Location="-2917.881, 4021.484, 0.4274965" ItemID="27699" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          </While>
        </If>
      </If>
    </If>
    <CallSubRoutine SubRoutineName="LearnRecipe" />
  </SubRoutine>
  <SubRoutine SubRoutineName="WhatToCook">
    <While Condition="InbagCount (30817) &gt;= 1 &amp;&amp; InbagCount (2678) &gt;= 1 &amp;&amp; Cooking.Level &lt; 40 &amp;&amp; HasRecipe(37836)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Making Spice Bread&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="37836" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(6291) &gt;= 1 &amp;&amp; Cooking.Level &lt; 85 &amp;&amp; HasRecipe(7751)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Brilliant Smallfish.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="7751" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(6289) &gt;= 1 &amp;&amp; Cooking.Level &lt; 130 &amp;&amp; HasRecipe(7753)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Longjaw Mud Snapper.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="7753" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(6308) &gt;= 1 &amp;&amp; Cooking.Level &lt; 180 &amp;&amp; HasRecipe(7755)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Bristle Whisker Catfish mmmm&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="7755" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(8365) &gt;= 1 &amp;&amp; Cooking.Level &lt; 255 &amp;&amp; HasRecipe(20916)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Mithril Head Trout.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="20916" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(13758) &gt;= 1 &amp;&amp; Cooking.Level &lt; 275 &amp;&amp; HasRecipe(18241)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Redgill Filet&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="18241" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(13760) &gt;= 1 &amp;&amp; Cooking.Level &lt; 295 &amp;&amp; HasRecipe(18244)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Poached Sunscale Salmon.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="18244" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(159) &gt;= 1 &amp;&amp; InbagCount(13759) &gt;= 1 &amp;&amp; Cooking.Level &lt; 295 &amp;&amp; HasRecipe(18243)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Nightfin Soup.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="18243" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(13889) &gt;= 1 &amp;&amp; Cooking.Level &lt; 325 &amp;&amp; HasRecipe(18247)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Baked Salmon.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="18247" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(27422) &gt;= 1 &amp;&amp; Cooking.Level &lt; 355 &amp;&amp; HasRecipe(42296)" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Stewed Trout.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="42296" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(27438) &gt;= 1 &amp;&amp; Cooking.Level &lt; 365 &amp;&amp; HasRecipe(33295)" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Fishsticks.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="33295" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(41803) &gt;= 1 &amp;&amp; Cooking.Level &lt; 380 &amp;&amp; HasRecipe(45560)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Smoked Rockfin.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="45560" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(36781) &gt;= 1 &amp;&amp; Cooking.Level &lt; 415 &amp;&amp; HasRecipe(58065)" IgnoreCanRun="False">
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Darkwater Clam&quot;), 0);" />
      <WaitAction Condition="false" Timeout="987" />
    </While>
    <While Condition="InbagCount(36782) &gt;= 2 &amp;&amp; Cooking.Level &lt; 415 &amp;&amp; HasRecipe(58065)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Dalaran Clam Chowder.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="58065" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(41802) &gt;= 1 &amp;&amp; Cooking.Level &lt; 415 &amp;&amp; HasRecipe(45569)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Baked Manta Ray.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="45569" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(41805) &gt;= 3 &amp;&amp; Cooking.Level &lt; 425 &amp;&amp; HasRecipe(64358)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Cooking Black Jelly.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CallSubRoutine SubRoutineName="CreateFood" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="64358" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount (2595) &gt;= 1 &amp;&amp; InbagCount (2596) &gt;= 2 &amp;&amp; Cooking.Level &lt; 435 &amp;&amp; HasRecipe(88015)" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Making BEER!!!!&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="88015" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
    <While Condition="InbagCount(62778) &gt;= 1 &amp;&amp; Cooking.Level &lt; 465 &amp;&amp; HasRecipe(88006)" IgnoreCanRun="False">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Making Blackened Surprise.&quot;); " />
      <CallSubRoutine SubRoutineName="CheckCookingSkill" />
      <CastSpellAction RepeatType="Specific" Repeat="1" Entry="88006" CastOnItem="False" ItemType="Chest" ItemId="0" />
    </While>
  </SubRoutine>
  <SubRoutine SubRoutineName="LearnRecipe">
    <While Condition="!HasRecipe(37836) &amp;&amp; Cooking.Level &gt;= 1 &amp;&amp; Cooking.Level &lt; 40" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(7751) &amp;&amp; Cooking.Level &gt;= 40 &amp;&amp; Cooking.Level &lt; 85" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; InbagCount(6325) == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;I need a recipe. Going to visit a vendor in SW.&quot;); " />
        <FlyToAction Dismount="True" Location="-8800.812, 767.9769, 96.33873" />
        <BuyItemAction NpcEntry="5494" Location="-8800.812, 767.9769, 96.33873" ItemID="6325" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
        <WaitAction Condition="false" Timeout="1000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning a recipe we have in the bag.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Brilliant Smallfish&quot;), 0);" />
      <WaitAction Condition="false" Timeout="3478" />
    </While>
    <While Condition="!HasRecipe(7753) &amp;&amp; Cooking.Level &gt;= 65 &amp;&amp; Cooking.Level &lt; 130" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; InbagCount (6328) == 0" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9492.55, 81.4931, 56.2269" />
        <WaitAction Condition="false" Timeout="1000" />
        <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.2269" ItemID="6328" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
        <WaitAction Condition="false" Timeout="1000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning my new recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Longjaw Mud Snapper&quot;), 0);" />
      <WaitAction Condition="false" Timeout="3458" />
    </While>
    <While Condition="!HasRecipe(7755) &amp;&amp; Cooking.Level &gt;= 110 &amp;&amp; Cooking.Level &lt; 180" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; InbagCount (6330) == 0" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-8800.812, 767.9769, 96.33873" />
        <WaitAction Condition="false" Timeout="1000" />
        <BuyItemAction NpcEntry="5494" Location="-8800.812, 767.9769, 96.33873" ItemID="6330" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
        <WaitAction Condition="false" Timeout="1000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning my new recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Bristle Whisker Catfish&quot;), 0);" />
      <WaitAction Condition="false" Timeout="3369" />
    </While>
    <While Condition="!HasRecipe(20916) &amp;&amp; Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 255" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; InbagCount (17062) == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to Wetlands to buy recipe for later use.&quot;); " />
        <FlyToAction Dismount="True" Location="-3730.961, -653.1401, 2.362965" />
        <WaitAction Condition="false" Timeout="2000" />
        <BuyItemAction NpcEntry="3178" Location="-3731.31, -648.925, 2.449463" ItemID="17062" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Might aswell clean the bags. Selling greys and fish&quot;); " />
        <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
        <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290" Count="0" />
        <WaitAction Condition="false" Timeout="2000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning my new recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Mithril Head Trout&quot;), 0);" />
      <WaitAction Condition="false" Timeout="4651" />
    </While>
    <While Condition="!HasRecipe(18241) &amp;&amp; Cooking.Level &gt;= 225 &amp;&amp; Cooking.Level &lt; 275" IgnoreCanRun="True">
      <If Condition="InbagCount (13941) == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to BB to buy recipe. Hope they like you.&quot;); " />
        <FlyToAction Dismount="False" Location="-14361.75, 434.9416, 7.371971" />
        <WaitAction Condition="false" Timeout="1000" />
        <MoveToAction Location="-14335.25, 420.6946, 6.626303" MoveType="Location" Pathing="Navigator" Entry="0" />
        <WaitAction Condition="false" Timeout="1000" />
        <BuyItemAction NpcEntry="2664" Location="-14331.23, 419.2986, 6.626091" ItemID="13941" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
        <WaitAction Condition="false" Timeout="1000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning my new recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Filet of Redgill&quot;), 0);" />
      <WaitAction Condition="false" Timeout="4875" />
    </While>
    <While Condition="!HasRecipe(18244) &amp;&amp; Cooking.Level &gt;= 250 &amp;&amp; Cooking.Level &lt; 295 || !HasRecipe(18243) &amp;&amp; Cooking.Level &gt;= 250 &amp;&amp; Cooking.Level &lt; 295" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(18247) &amp;&amp; Cooking.Level &gt;= 275 &amp;&amp; Cooking.Level &lt; 325" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; InbagCount (13949) == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to buy recipe in Ferals.&quot;); " />
        <If Condition="Me.MapId == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We are not on Kalimdor. Going to Wetlands to take the boat. Sit back and enjoy the ride.&quot;); " />
          <CallSubRoutine SubRoutineName="EK to Kalimdor" />
        </If>
        <If Condition="Me.MapId == 1" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-4298.889, 2221.899, 9.411183" />
          <BuyItemAction NpcEntry="7947" Location="-4297.269, 2221.389, 9.4114" ItemID="13949" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Might aswell clean the bags. Selling greys and fish&quot;); " />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
          <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Specific" ItemID="30817,2678,30816,6291,7751,4592,6289,6308,4593,6290,8364,8365,13760,13932,13759,13931,13758" Count="0" />
          <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Baked Salmon&quot;), 0);" />
          <WaitAction Condition="false" Timeout="3000" />
        </If>
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning my new recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Baked Salmon&quot;), 0);" />
      <WaitAction Condition="false" Timeout="3458" />
    </While>
    <While Condition="!HasRecipe(42296) &amp;&amp; Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 355" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning Stewed Trout.&quot;); " />
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(33295) &amp;&amp; Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 365" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance &amp;&amp; (InbagCount(27699) == 0)" IgnoreCanRun="True">
        <While Condition="Me.MapId == 530" IgnoreCanRun="True">
          <If Condition="!HasRecipe(33295) &amp;&amp; (InbagCount(27699) == 0)" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Need Fishstick recipe. Flying to buy it.&quot;); " />
            <FlyToAction Dismount="True" Location="-2944.534, 4005.904, -0.8709726" />
            <While Condition="(InbagCount(27699) == 0)" IgnoreCanRun="True">
              <BuyItemAction NpcEntry="19296" Location="-2917.881, 4021.484, 0.4274965" ItemID="27699" BuyItemType="SpecificItem" Count="1" BuyAdditively="False" />
            </While>
            <SellItemAction Sell="All" NpcEntry="0" Location="0, 0, 0" SellItemType="Greys" ItemID="" Count="0" />
          </If>
        </While>
        <While Condition="Me.MapId != 530 &amp;&amp; Me.MapId == 0" IgnoreCanRun="True">
          <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Need Fishstick recipe. Flying to buy it. Going to Outlands first tho...&quot;); " />
          <CallSubRoutine SubRoutineName="EK to Outland" />
        </While>
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Learning Golden Fish Sticks recipe.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Recipe: Golden Fish Sticks&quot;), 0);" />
      <WaitAction Condition="false" Timeout="3558" />
    </While>
    <While Condition="(!HasRecipe(45560) || !HasRecipe(58065) || !HasRecipe(45569)) &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 415" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(64358) &amp;&amp; Cooking.Level &gt;= 400 &amp;&amp; Cooking.Level &lt; 425" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(88015) &amp;&amp; Cooking.Level &gt;= 415 &amp;&amp; Cooking.Level &lt; 435" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
    <While Condition="!HasRecipe(88006) &amp;&amp; Cooking.Level &gt;= 435 &amp;&amp; Cooking.Level &lt; 465" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="TrainCooking" />
    </While>
  </SubRoutine>
  <!--Travling Subs-->
  <SubRoutine SubRoutineName="LeaveBV">
    <!--Bloodhoof Village-->
    <MoveToAction Location="-2278.096, -324.9188, -9.423664" MoveType="Location" Pathing="Navigator" Entry="0" />
    <MoveToAction Location="-2312.164, -370.3129, -9.423664" MoveType="Location" Pathing="ClickToMove" Entry="0" />
  </SubRoutine>
  <SubRoutine SubRoutineName="EnterBV">
    <!--Bloodhoof Village-->
    <FlyToAction Dismount="False" Location="-2237.091, -347.711, 66.91583" />
    <MoveToAction Location="-2264.797, -306.1289, 48.58779" MoveType="Location" Pathing="ClickToMove" Entry="0" />
    <MoveToAction Location="-2266.557, -304.4045, -3.17372" MoveType="Location" Pathing="ClickToMove" Entry="0" />
    <FlyToAction Dismount="True" Location="-2270.601, -306.3915, -9.423664" />
  </SubRoutine>
  <SubRoutine SubRoutineName="LakeshireHS">
    <If Condition="HSCooldown() == 0 &amp;&amp; ObjectManager.Me.HearthstoneAreaId == 69" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Hearthstone is read for use! Taking the short way home!!.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Hearthstone&quot;), 0);" />
      <WaitAction Condition="false" Timeout="16000" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="EK to Uldum">
    <CallSubRoutine SubRoutineName="City to Uldum" />
  </SubRoutine>
  <SubRoutine SubRoutineName="Northren to EK">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="LakeshireHS" />
      <If Condition="Me.MapId == 571" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to Valiance Keep docks for a boat to SW.&quot;); " />
        <FlyToAction Dismount="True" Location="2232.913, 5136.488, 5.346051" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ).Location.Distance(new WoWPoint(2218.391, 5119.589, -0.03939917)) &lt; 3" Timeout="6000000" />
        <WaitAction Condition="false" Timeout="6987" />
        <MoveToAction Location="2224.172, 5117.85, 9.493399" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <WaitAction Condition="Me.MapId == 0" Timeout="650000" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to get along side.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ).Location.Distance(new WoWPoint(-8288.816, 1424.703, 0.01983927)) &lt; 30" Timeout="6000000" />
        <WaitAction Condition="false" Timeout="9000" />
        <MoveToAction Location="-8295.446, 1396.995, 4.481495" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Outland to EK">
    <CallSubRoutine SubRoutineName="LakeshireHS" />
    <If Condition="Me.MapId == 530" IgnoreCanRun="True">
      <If Condition="Me.IsAlliance" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going back to SW.&quot;); " />
        <FlyToAction Dismount="False" Location="-1933.037, 5395.858, -12.42817" />
        <MoveToAction Location="-1907.518, 5405.633, -12.42817" MoveType="Location" Pathing="Navigator" Entry="0" />
        <MoveToAction Location="-1893.641, 5390.416, -12.42817" MoveType="Location" Pathing="Navigator" Entry="0" />
        <InteractionAction InteractType="GameObject" Entry="183325" InteractDelay="0" GameObjectType="Transport" SpellFocus="Anvil" />
        <WaitAction Condition="Me.MapId == 0" Timeout="25000" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="EK to Outland">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Outlands.&quot;); " />
      <If Condition="(Me.MapId == 1)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Kalimdor to EK" />
      </If>
      <If Condition="Me.ZoneId != 4 || (Me.ZoneId != 44)" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9000.289, 863.0194, 129.6055" />
        <MoveToAction Location="-9006.661, 870.9152, 129.6924" MoveType="Location" Pathing="Navigator" Entry="0" />
        <WaitAction Condition="false" Timeout="1898" />
        <InteractionAction InteractType="GameObject" Entry="195141" InteractDelay="2000" GameObjectType="Transport" SpellFocus="Anvil" />
        <WaitAction Condition="Me.ZoneId == 4" Timeout="25000" />
      </If>
      <FlyToAction Dismount="False" Location="-11895.9, -3206.984, -6.04731" />
      <CustomAction Code="CTM(-11930.31, -3209.613, -1.836873);" />
      <WaitAction Condition="Me.MapId == 530" Timeout="25000" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Northrend to City">
    <If Condition="Me.MapId == 571" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="LakeshireHS" />
      <If Condition="Me.IsAlliance" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going back to SW.&quot;); " />
        <If Condition="Me.ZoneId != 4395" IgnoreCanRun="True">
          <FlyToAction Dismount="False" Location="5721.083, 713.4098, 654.6246" />
        </If>
        <InteractionAction InteractType="GameObject" Entry="190960" InteractDelay="0" GameObjectType="Transport" SpellFocus="Anvil" />
        <WaitAction Condition="Me.MapId == 0" Timeout="25000" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="City to Uldum">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to Uldum Portal.&quot;); " />
      <FlyToAction Dismount="True" Location="-8231.306, 417.2011, 117.4756" />
      <If Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 207695 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 207695 ).Location.Distance(new WoWPoint(-8231.306, 417.2011, 117.4756)) &lt; 20" IgnoreCanRun="True">
        <InteractionAction InteractType="GameObject" Entry="207695" InteractDelay="0" GameObjectType="Transport" SpellFocus="Anvil" />
        <WaitAction Condition="Me.MapId == 1" Timeout="5000" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Is the portal broken? Taking the ship to Kalimdor instead.&quot;); " />
      <CallSubRoutine SubRoutineName="EK to Kalimdor" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="EK to Northern">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.MapId == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Northern.&quot;); " />
        <FlyToAction Dismount="True" Location="-8295.954, 1405.365, 4.412278" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ).Location.Distance(new WoWPoint(-8288.816, 1424.703, 0.01983927)) &lt; 30" Timeout="6000000" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Boat is here! Wake up.&quot;); " />
        <WaitAction Condition="false" Timeout="6987" />
        <MoveToAction Location="-8294.362, 1423.174, 9.456192" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets hope we dont meet any Somlian pirates :(&quot;); " />
        <WaitAction Condition="Me.MapId == 571" Timeout="650000" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for boat to get along side.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 190536 ).Location.Distance(new WoWPoint(2218.391, 5119.589, -0.03280054)) &lt; 30" Timeout="6000000" />
        <WaitAction Condition="false" Timeout="7040" />
        <MoveToAction Location="2231.335, 5132.801, 5.343085" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="EK to Kalimdor">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.MapId == 0" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Kalimdor,&quot;); " />
        <FlyToAction Dismount="True" Location="-3859.799, -658.565, 5.186935" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ).Location.Distance(new WoWPoint(-3872.35, -639.9439, 0.03924475)) &lt; 20" Timeout="60000000" />
        <WaitAction Condition="false" Timeout="7832" />
        <MoveToAction Location="-3866.206, -647.1971, 6.05872" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <MoveToAction Location="-3864.247, -636.9529, 6.129509" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <MoveToAction Location="-3874.158, -629.8268, 6.014582" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <WaitAction Condition="Me.MapId == 1" Timeout="650000" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to get along side!&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ).Location.Distance(new WoWPoint(-4016.39, -4740.588, -0.04994059)) &lt; 3" Timeout="6000000" />
        <WaitAction Condition="false" Timeout="9854" />
        <MoveToAction Location="-3999.296, -4726.252, 4.38778" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Kalimdor to EK">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="LakeshireHS" />
      <If Condition="Me.MapId == 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going home to Eastern Kingdom!&quot;); " />
        <FlyToAction Dismount="True" Location="-4001.157, -4728.268, 4.471069" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ).Location.Distance(new WoWPoint(-4016.39, -4740.588, -0.04994059)) &lt; 3" Timeout="6000000" />
        <WaitAction Condition="false" Timeout="7896" />
        <MoveToAction Location="-4007.934, -4733.479, 5.99677" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <MoveToAction Location="-4009.456, -4745.52, 6.097857" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <MoveToAction Location="-4020.529, -4748.299, 6.219002" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to set sail!&quot;); " />
        <WaitAction Condition="Me.MapId == 0" Timeout="650000" />
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to get along side!&quot;); " />
        <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 176231 ).Location.Distance(new WoWPoint(-3872.35, -639.9439, 0.03924475)) &lt; 20" Timeout="60000000" />
        <WaitAction Condition="false" Timeout="8997" />
        <MoveToAction Location="-3861.168, -657.361, 5.266752" MoveType="Location" Pathing="ClickToMove" Entry="0" />
        <FlyToAction Dismount="False" Location="-3890.306, -709.368, 17.34875" />
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Northern to Dalaran">
    <!--Neutral travel sub-->
    <If Condition="DistanceTo(5737.553, 659.7015, 646.6895) &gt; 100 &amp;&amp; Me.MapId == 571" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Initiate Dalaran travel protocol... beeep.&quot;); " />
      <FlyToAction Dismount="False" Location="5341.598, 522.6038, 440.8728" />
      <MoveToAction Location="5611.935, 601.7, 796.0209" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <MoveToAction Location="5706.784, 637.7018, 722.1323" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <FlyToAction Dismount="True" Location="5737.553, 659.7015, 646.6895" />
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Landed in Dalaran with succes!.&quot;); " />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Rachet to BB">
    <If Condition="Me.MapId == 1" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Booty Bay,&quot;); " />
      <FlyToAction Dismount="True" Location="-997.0228, -3824.336, 5.498193" />
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
      <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ).Location.Distance(new WoWPoint(-1005.613, -3841.648, 0.03624475)) &lt; 20" Timeout="60000000" />
      <WaitAction Condition="false" Timeout="7832" />
      <MoveToAction Location="-998.1533, -3834.83, 6.116212" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <MoveToAction Location="-998.3066, -3843.987, 6.155065" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <MoveToAction Location="-1009.104, -3850.717, 6.087852" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <WaitAction Condition="Me.MapId == 0" Timeout="650000" />
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to get along side!&quot;); " />
      <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ).Location.Distance(new WoWPoint(-14277.75, 582.8661, -0.06804029)) &lt; 3" Timeout="6000000" />
      <WaitAction Condition="false" Timeout="17236" />
      <MoveToAction Location="-14284.53, 558.7117, 8.686271" MoveType="Location" Pathing="ClickToMove" Entry="0" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="BB to Rachet">
    <If Condition="Me.MapId == 0" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to Rachet,&quot;); " />
      <FlyToAction Dismount="True" Location="-14284.88, 556.8063, 8.685333" />
      <MoveToAction Location="-14284.13, 559.3175, 8.686168" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat.&quot;); " />
      <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ).Location.Distance(new WoWPoint(-14277.75, 582.8661, -0.06804029)) &lt; 3" Timeout="6000000" />
      <WaitAction Condition="false" Timeout="7832" />
      <MoveToAction Location="-14278.06, 572.9883, 6.158577" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <MoveToAction Location="-14269.81, 584.2465, 6.043634" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <MoveToAction Location="-14271.97, 592.5333, 6.03444" MoveType="Location" Pathing="ClickToMove" Entry="0" />
      <WaitAction Condition="Me.MapId == 1" Timeout="650000" />
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Waiting for the boat to get along side!&quot;); " />
      <WaitAction Condition="ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ) != null &amp;&amp; ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().FirstOrDefault(o =&gt; o.Entry == 20808 ).Location.Distance(new WoWPoint(-1005.613, -3841.648, 0.03624475)) &lt; 20" Timeout="60000000" />
      <WaitAction Condition="false" Timeout="12000" />
      <MoveToAction Location="-994.6897, -3828.401, 5.627099" MoveType="Location" Pathing="ClickToMove" Entry="0" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="BVHS">
    <If Condition="HSCooldown() == 0 &amp;&amp; ObjectManager.Me.HearthstoneAreaId == 222" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Hearthstone is read for use! Taking the short way home!!.&quot;); " />
      <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Hearthstone&quot;), 0);" />
      <WaitAction Condition="false" Timeout="17897" />
      <MoveToAction Location="-2328.623, -365.1167, -8.742797" MoveType="Location" Pathing="ClickToMove" Entry="0" />
    </If>
  </SubRoutine>
  <!--Whiles for cooking-->
  <While Condition="(InbagCount (30817) + InbagCount (2678) + InbagCount (30816)*2) &gt;= 150 &amp;&amp; Cooking.Level &gt;= 1 &amp;&amp; Cooking.Level &lt; 40 || InbagCount (6291) + InbagCount (7751) &gt;= 40 &amp;&amp; Cooking.Level &gt;= 40 &amp;&amp; Cooking.Level &lt; 65 || (InbagCount (4592) + InbagCount (6289)) &gt;= 60 &amp;&amp; Cooking.Level &gt;= 65 &amp;&amp; Cooking.Level &lt; 110 || (InbagCount (6308) + InbagCount (4593)) &gt;= 120 &amp;&amp; Cooking.Level &gt;= 110 &amp;&amp; Cooking.Level &lt; 175 || (InbagCount (8364) + InbagCount (8365)) &gt;= 90 &amp;&amp; (InbagCount (13759) + InbagCount (13760) + InbagCount(13932) + InbagCount(13931)) &gt;= 40 &amp;&amp; Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 275 || (InbagCount (13935) + InbagCount (13889)) &gt;= 100 &amp;&amp; Cooking.Level &gt;= 275 &amp;&amp; Cooking.Level &lt; 325 || (InbagCount (27666) + InbagCount (27438)) &gt;= 15 &amp;&amp; (InbagCount (33048) + InbagCount (27422)) &gt;= 50 &amp;&amp; Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 350" IgnoreCanRun="True">
    <!--Classic + BC Part-->
    <CallSubRoutine SubRoutineName="LearnRecipe" />
    <CallSubRoutine SubRoutineName="CreateFood" />
    <CallSubRoutine SubRoutineName="WhatToCook" />
  </While>
  <While Condition="InbagCount(41805) + InbagCount(45932) &gt;= 60 &amp;&amp; InbagCount(41803) + InbagCount (34759) &gt;= 100 &amp;&amp; InbagCount (43268)*2 + InbagCount (36781) + InbagCount (36782) &gt;= 30 &amp;&amp; InbagCount (42942) + InbagCount (41802) &gt;= 60 &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 415 || InbagCount (62790)*3 + InbagCount (2596)*2 + InbagCount (2595) &gt;= 150 &amp;&amp; Cooking.Level &gt;= 415 &amp;&amp; Cooking.Level &lt; 435" IgnoreCanRun="True">
    <!--Northern Part-->
    <CallSubRoutine SubRoutineName="LearnRecipe" />
    <CallSubRoutine SubRoutineName="CreateFood" />
    <CallSubRoutine SubRoutineName="WhatToCook" />
  </While>
  <While Condition="(InbagCount (62778) + InbagCount (62676)) &gt;= 15 &amp;&amp; Cooking.Level &gt;= 435 &amp;&amp; Cooking.Level &lt; 450" IgnoreCanRun="True">
    <!--Cataclysm Part-->
    <CallSubRoutine SubRoutineName="LearnRecipe" />
    <CallSubRoutine SubRoutineName="CreateFood" />
    <CallSubRoutine SubRoutineName="WhatToCook" />
  </While>
  <!--If's for fishing-->
  <If Condition="(InbagCount (30817) + InbagCount (2678) + InbagCount (30816)*2) &lt; 150 &amp;&amp; Cooking.Level &gt;= 1 &amp;&amp; Cooking.Level &lt; 40" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We need supplies!! Going to buy some.&quot;); " />
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <FlyToAction Dismount="True" Location="-9492.55, 81.4931, 56.22646" />
      <WaitAction Condition="false" Timeout="2000" />
      <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.22646" ItemID="30817" BuyItemType="SpecificItem" Count="75" BuyAdditively="True" />
      <WaitAction Condition="false" Timeout="1000" />
      <BuyItemAction NpcEntry="66" Location="-9492.55, 81.4931, 56.22646" ItemID="2678" BuyItemType="SpecificItem" Count="75" BuyAdditively="True" />
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="EnterBV" />
      <WaitAction Condition="false" Timeout="1000" />
      <BuyItemAction NpcEntry="3081" Location="-2267.63, -324.007, -9.424726" ItemID="30817" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
      <BuyItemAction NpcEntry="3081" Location="-2267.63, -324.007, -9.424726" ItemID="2678" BuyItemType="SpecificItem" Count="75" BuyAdditively="False" />
      <WaitAction Condition="false" Timeout="1000" />
      <CallSubRoutine SubRoutineName="LeaveBV" />
    </If>
  </If>
  <If Condition="(InbagCount (6291) + InbagCount (7751)) &lt; 40 &amp;&amp; Cooking.Level &gt;= 40 &amp;&amp; Cooking.Level &lt; 65" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 40x small fish.&quot;); " />
    <While Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="DistanceTo (-9401.631, -153.8076, 57.96643) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9401.631, -153.8076, 57.96643" />
      </If>
      <If Condition="!IsFacing(3.2f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(3.2f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="DistanceTo (-2237.436, -229.2124, -13.06274) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-2237.436, -229.2124, -13.06274" />
      </If>
      <If Condition="!IsFacing(1.3f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(1.3f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (4592) + InbagCount (6289)) &lt; 60 &amp;&amp; Cooking.Level &gt;= 65 &amp;&amp; Cooking.Level &lt; 110" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 60x Raw Longjaw Mud Snapper.&quot;); " />
    <While Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="DistanceTo (-9375.861, -2041.789, 57.27626) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9375.861, -2041.789, 57.27626" />
      </If>
      <If Condition="!IsFacing(6f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(6f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="DistanceTo (-1262.493, 111.8381, 128.4153) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-1262.493, 111.8381, 128.4153" />
      </If>
      <If Condition="!IsFacing(5.0f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(5.0f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (6308) + InbagCount (4593)) &lt; 120 &amp;&amp; Cooking.Level &gt;= 110 &amp;&amp; Cooking.Level &lt; 175" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 110x catfish.&quot;); " />
    <While Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="DistanceTo (-9375.861, -2041.789, 57.27626) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-9375.861, -2041.789, 57.27626" />
      </If>
      <If Condition="!IsFacing(6f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(6f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="DistanceTo (2645.376, -541.5344, 105.5158) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="2645.376, -541.5344, 105.5158" />
      </If>
      <If Condition="!IsFacing(0.8f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(0.8f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (8364) + InbagCount (8365)) &lt; 110 &amp;&amp; Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 255" IgnoreCanRun="False">
    <CallSubRoutine SubRoutineName="BuyRecipe" />
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 110x Mithril Head Fish.&quot;); " />
    <While Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="DistanceTo (1045.846, -2098.408, 54.68686) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="1045.846, -2098.408, 54.68686" />
      </If>
      <If Condition="!IsFacing(5.2f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(5.2f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="InbagCount(8364) + InbagCount(8365) == 55" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Halfway! 55x Mithril Head Fish more!.&quot;); " />
      </If>
      <If Condition="DistanceTo (-1990.381, 2234.376, 51.08327) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-1990.381, 2234.376, 51.08327" />
      </If>
      <If Condition="!IsFacing(0.2f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(0.2f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount(8364) + InbagCount(8365)) &gt;= 110 &amp;&amp; (InbagCount (13759) + InbagCount (13760) + InbagCount(13932) + InbagCount(13931)) &lt; 40 &amp;&amp; Cooking.Level &gt;= 175 &amp;&amp; Cooking.Level &lt; 275" IgnoreCanRun="False">
    <CallSubRoutine SubRoutineName="BuyRecipe" />
    <While Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="InbagCount(159) &lt; 40" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Buying some supplies for later.&quot;); " />
        <FlyToAction Dismount="False" Location="2153.125, -5267.709, 82.77434" />
        <BuyItemAction NpcEntry="11038" Location="2153.125, -5267.709, 82.77434" ItemID="159" BuyItemType="SpecificItem" Count="40" BuyAdditively="False" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 40x Nightfin or/and Sun Scale Salmon, going to EPL.&quot;); " />
      <If Condition="DistanceTo (2121.706, -4414.986, 73.89479) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="2121.706, -4414.986, 73.89479" />
      </If>
      <If Condition="!IsFacing(2.2f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(2.2f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="InbagCount(159) &lt; 40" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Buying some supplies for later.&quot;); " />
        <FlyToAction Dismount="False" Location="-4564.63, 1835.27, 87.06828" />
        <WaitAction Condition="false" Timeout="1000" />
        <BuyItemAction NpcEntry="44376" Location="-4564.63, 1835.27, 87.06828" ItemID="159" BuyItemType="SpecificItem" Count="40" BuyAdditively="False" />
      </If>
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 40x Nightfin or/and Sun Scale Salmon, going to Feralas.&quot;); " />
      <If Condition="DistanceTo (-3038.854, 1735.616, 28.14749) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-3038.854, 1735.616, 28.14749" />
      </If>
      <If Condition="!IsFacing(1.3f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(1.3f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (13935) + InbagCount (13889)) &lt; 100 &amp;&amp; Cooking.Level &gt;= 275 &amp;&amp; Cooking.Level &lt; 325" IgnoreCanRun="False">
    <CallSubRoutine SubRoutineName="BuyRecipe" />
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch 100x Raw Whitescale Salmon.&quot;); " />
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <While Condition="Me.MapId == 0" IgnoreCanRun="True">
        <If Condition="DistanceTo (-12548.56, -2704.443, 1.19688) &gt; 5" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-12548.56, -2704.443, 1.19688" />
        </If>
        <If Condition="!IsFacing(1.9f)" IgnoreCanRun="True">
          <CustomAction Code="Me.SetFacing(1.9f);" />
          <CallSubRoutine SubRoutineName="UF" />
        </If>
        <CallSubRoutine SubRoutineName="DoFishing" />
      </While>
      <While Condition="Me.MapId == 1" IgnoreCanRun="True">
        <If Condition="DistanceTo (-3044.25, 1966.953, 29.34509) &gt; 5" IgnoreCanRun="True">
          <FlyToAction Dismount="True" Location="-3044.25, 1966.953, 29.34509" />
        </If>
        <If Condition="!IsFacing(6.2f)" IgnoreCanRun="True">
          <CustomAction Code="Me.SetFacing(6.2f);" />
          <CallSubRoutine SubRoutineName="UF" />
        </If>
        <CallSubRoutine SubRoutineName="DoFishing" />
      </While>
    </If>
    <While Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="DistanceTo (-3038.854, 1735.616, 28.14749) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-3038.854, 1735.616, 28.14749" />
      </If>
      <If Condition="!IsFacing(1.3f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(1.3f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (27666) + InbagCount (27438)) &lt; 15 &amp;&amp; Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 350 || (InbagCount (33048) + InbagCount (27422)) &lt; 50 &amp;&amp; Cooking.Level &gt;= 325 &amp;&amp; Cooking.Level &lt; 350" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch some 15x Golden Darter and 50x Barbed Gill Trout.&quot;); " />
    <While Condition="Me.MapId == 530" IgnoreCanRun="True">
      <If Condition="InbagCount(27699) == 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="BuyRecipe" />
      </If>
      <If Condition="DistanceTo (-3023.773, 3786.894, 0.5336008) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-3023.773, 3786.894, 0.5336008" />
      </If>
      <If Condition="!IsFacing(1.25f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(1.25f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <While Condition="Me.MapId != 530 &amp;&amp; Me.MapId == 0" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="EK to Outland" />
    </While>
  </If>
  <If Condition="(InbagCount (41805) + InbagCount (45932)) &lt; 60 &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 415 || (InbagCount (41803) + InbagCount (34759)) &lt; 100  &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 380 || (InbagCount (43268)*2 + InbagCount (36781) +  InbagCount (36782)) &lt; 30 &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 415 || (InbagCount (42942) + InbagCount (41802)) &lt; 60 &amp;&amp; Cooking.Level &gt;= 350 &amp;&amp; Cooking.Level &lt; 415" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Time to catch alot of random fish. Dont mind the warning with the disable plugins etc. Its there due to the bot opening clams, so nothing dangerous.&quot;); " />
    <If Condition="Me.MapId == 530" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="Outland to EK" />
    </If>
    <If Condition="Me.MapId == 1" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="Kalimdor to EK" />
    </If>
    <If Condition="Me.MapId == 0" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="EK to Northern" />
    </If>
    <While Condition="Me.MapId == 571" IgnoreCanRun="True">
      <If Condition="DistanceTo (2610.576, 4901.382, 0.7474862) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="2610.576, 4901.382, 0.7474862" />
      </If>
      <If Condition="!IsFacing(3.8f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(3.8f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <If Condition="InbagCount(36781) &gt;= 1" IgnoreCanRun="True">
        <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Opening Darkwater Clam.&quot;); " />
        <CustomAction Code="Lua.DoString(string.Format(&quot;RunMacroText(\&quot;{0}\&quot;)&quot;, &quot;/use Darkwater Clam&quot;), 0);" />
        <WaitAction Condition="false" Timeout="987" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
  </If>
  <If Condition="(InbagCount (62790) + InbagCount (2596) + InbagCount (2595)*2) &lt; 150 &amp;&amp; Cooking.Level &gt;= 415 &amp;&amp; Cooking.Level &lt; 435" IgnoreCanRun="False">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We need supplies!! Going to buy some in Dalaran.&quot;); " />
    <If Condition="Me.MapId == 0" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="EK to Northern" />
    </If>
    <If Condition="Me.MapId == 1" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="Kalimdor to EK" />
    </If>
    <While Condition="Me.ZoneId != 4395 &amp;&amp; Me.MapId == 571" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Travling to Dalaran&quot;); " />
      <CallSubRoutine SubRoutineName="Northern to Dalaran" />
    </While>
    <If Condition="DistanceTo (5796.559, 667.2882, 613.8835) &gt; 20" IgnoreCanRun="True">
      <MoveToAction Location="5833.586, 605.7797, 622.3837" MoveType="Location" Pathing="Navigator" Entry="0" />
    </If>
    <BuyItemAction NpcEntry="33026" Location="5796.559, 667.2882, 613.8835" ItemID="2595" BuyItemType="SpecificItem" Count="50" BuyAdditively="False" />
    <BuyItemAction NpcEntry="33026" Location="5796.559, 667.2882, 613.8835" ItemID="2596" BuyItemType="SpecificItem" Count="100" BuyAdditively="False" />
  </If>
  <If Condition="(InbagCount (62778) + InbagCount (62676)) &lt; 15 &amp;&amp; Cooking.Level &gt;= 435 &amp;&amp; Cooking.Level &lt; 450" IgnoreCanRun="False">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="Me.MapId == 571" IgnoreCanRun="True">
        <If Condition="Me.ZoneId != 4395" IgnoreCanRun="True">
          <CallSubRoutine SubRoutineName="Northern to Dalaran" />
        </If>
        <If Condition="Me.ZoneId == 4395" IgnoreCanRun="True">
          <While Condition="!HasNewMail &amp;&amp; InbagCount(62778) &lt; 20" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Going to the AH to get 20x Meat.&quot;); " />
            <BuyItemFromAhAction ItemListType="Item" ItemID="62778" MaxBuyout="30g0s0c" Amount="20" BuyAdditively="False" AutoFindAh="True" BidOnItem="False" Location="0, 0, 0" />
          </While>
          <While Condition="HasNewMail" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We have mail! Gonna empty mailbox&quot;); " />
            <GetMailAction GetMailType="AllItems" ItemID="62778" CheckNewMail="True" MinFreeBagSlots="1" AutoFindMailBox="False" Location="5743.319, 678.8671, 644.6077" />
          </While>
        </If>
      </If>
      <If Condition="Me.MapId == 0" IgnoreCanRun="True">
        <If Condition="Me.ZoneId == 1519" IgnoreCanRun="True">
          <CallSubRoutine SubRoutineName="City to Uldum" />
          <If Condition="Me.MapId == 0" IgnoreCanRun="True">
            <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We dont have the portal? Taking the boat then..&quot;); " />
            <CallSubRoutine SubRoutineName="EK to Kalimdor" />
          </If>
        </If>
        <If Condition="Me.ZoneId != 1519" IgnoreCanRun="True">
          <If Condition="Me.MapId == 0" IgnoreCanRun="True">
            <CallSubRoutine SubRoutineName="EK to Kalimdor" />
          </If>
        </If>
      </If>
    </If>
    <If Condition="Me.MapId == 1" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Flying to Uldum to farm some meat.&quot;); " />
      <FlyToAction Dismount="True" Location="-9118.882, -1409.889, 94.86877" />
      <ChangeBotAction BotName="Grind" />
      <If Condition="Me.IsAlliance" IgnoreCanRun="True">
        <LoadProfileAction ProfileType="Honorbuddy" Path="HBProfile\Uldum_farm_435-450.xml" />
      </If>
    </If>
  </If>
  <!--End-->
  <If Condition="Cooking.Level &gt;= 450 &amp;&amp; Fishing.Level == 525" IgnoreCanRun="True">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Nothing more to do.&quot;); " />
    <CustomAction Code="Log(&quot;Starting log out in 20sec&quot;);" />
    <WaitAction Condition="false" Timeout="20000" />
    <CustomAction Code=" Lua.DoString(&quot;Logout()&quot;);TreeRoot.Stop();" />
    <WaitAction Condition="false" Timeout="35000" />
  </If>
  <If Condition="Cooking.Level &gt;= 450 &amp;&amp; Fishing.Level != 525" IgnoreCanRun="True">
    <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;Lets fish upto lvl 525.&quot;); " />
    <While Condition="Me.IsAlliance &amp;&amp; Me.ZoneId == 4395" IgnoreCanRun="True">
      <If Condition="Me.FreeNormalBagSlots &lt;= 1" IgnoreCanRun="True">
        <SellItemAction Sell="All" NpcEntry="28707" Location="5737.192, 672.8511, 613.244" SellItemType="Greys" ItemID="" Count="0" />
      </If>
      <If Condition="DistanceTo (5726.466, 666.5815, 613.2433) &gt; 5" IgnoreCanRun="True">
        <FlyToAction Dismount="False" Location="5807.371, 556.9195, 650.3774" />
        <MoveToAction Location="5726.466, 666.5815, 613.2433" MoveType="Location" Pathing="Navigator" Entry="0" />
      </If>
      <If Condition="!IsFacing(3.9f)" IgnoreCanRun="True">
        <CustomAction Code="Me.SetFacing(3.9f);" />
        <CallSubRoutine SubRoutineName="UF" />
      </If>
      <CallSubRoutine SubRoutineName="DoFishing" />
    </While>
    <If Condition="Me.ZoneId != 4395" IgnoreCanRun="True">
      <CustomAction Code="Log(System.Drawing.Color.YellowGreen,&quot;We are not in Dalaran :(&quot;); " />
      <WaitAction Condition="false" Timeout="20000" />
      <CustomAction Code=" Lua.DoString(&quot;Logout()&quot;);TreeRoot.Stop();" />
      <WaitAction Condition="false" Timeout="35000" />
    </If>
  </If>
  <CustomAction Code="Log(System.Drawing.Color.Red,&quot;If you see this line, and your bot is doing nothing, report it in the forum thread along with your cooking level and what zone you see this in.&quot;); " />
  <Declaration Code="int HSCooldown() &#xD;&#xA;{&#xD;&#xA;int cooldown = Lua.GetReturnVal&lt;int&gt;(&quot;for b=0,4 do for s=0,GetContainerNumSlots(b) do itemID=GetContainerItemID(b,s) _,cd,_=GetContainerItemCooldown(b,s) if itemID==6948 or itemID==64488 then start,duration,_ = GetContainerItemCooldown(0,1) cd=start+duration-GetTime() if cd&gt;0 then return math.ceil(cd) else return 0 end end end end&quot;, 0); &#xD;&#xA;return cooldown; &#xD;&#xA;}" />
  <Declaration Code="Stopwatch PulseSW = new Stopwatch();" />
  <Declaration Code="DateTime CastTimeStamp = DateTime.Now;" />
  <Declaration Code="void MyErr(string fmt,params object[] args)&#xD;&#xA;{&#xD;&#xA;    Log(Color.Green,&quot;Fishing1-525: &quot;,Color.Red,fmt,args);&#xD;&#xA;}" />
  <Declaration Code="void MyLog(string fmt,params object[] args)&#xD;&#xA;{&#xD;&#xA;    Log(Color.Green,&quot;Fishing1-525: &quot;,Color.LightGreen,fmt,args);&#xD;&#xA;}" />
  <Declaration Code="void Fish()&#xD;&#xA;{&#xD;&#xA;  if (!PulseSW.IsRunning)&#xD;&#xA;    PulseSW.Start();&#xD;&#xA;  using (new FrameLock())&#xD;&#xA;  {&#xD;&#xA;  if (PulseSW.ElapsedMilliseconds &gt;= 1000)&#xD;&#xA;  { &#xD;&#xA;    MyErr(&quot;Warning: It took {0} milliseconds to pulse.\nThis can cause missed bites. To fix try disabling all plugins&quot;,&#xD;&#xA;        PulseSW.ElapsedMilliseconds); &#xD;&#xA;  }&#xD;&#xA;  PulseSW.Reset(); PulseSW.Start();&#xD;&#xA;  try&#xD;&#xA;  {&#xD;&#xA;    var bobber = ObjectManager.GetObjectsOfType&lt;WoWGameObject&gt;().&#xD;&#xA;           FirstOrDefault(u =&gt; u.SubType == WoWGameObjectType.FishingBobber &amp;&amp; u.CreatedByGuid == Me.Guid);&#xD;&#xA;    if (bobber != null &amp;&amp; bobber.IsValid &amp;&amp; ((WoWFishingBobber)bobber.SubObj).IsBobbing)&#xD;&#xA;    {&#xD;&#xA;       bobber.Interact();&#xD;&#xA;    }&#xD;&#xA;    else if (bobber == null &amp;&amp; !Me.IsCasting &amp;&amp; DateTime.Now -  CastTimeStamp &gt;= TimeSpan.FromSeconds(1))&#xD;&#xA;    {&#xD;&#xA;      TreeRoot.StatusText= string.Format(&quot;Fishing level: {0}&quot;,Fishing.Level);&#xD;&#xA;       SpellManager.Cast(&quot;Fishing&quot;);&#xD;&#xA;       CastTimeStamp = DateTime.Now;&#xD;&#xA;    }&#xD;&#xA;  }&#xD;&#xA;  catch(Exception ex){MyErr(ex.ToString());}&#xD;&#xA;  }&#xD;&#xA;}" />
  <Declaration Code="bool IsFacing(float dirInRadians)&#xD;&#xA;{&#xD;&#xA;  var facePoint = WoWPoint.RayCast(Me.Location, dirInRadians, 1f);&#xD;&#xA;  return WoWMathHelper.IsFacing(Me.Location, Me.RenderFacing, facePoint,0.5f);&#xD;&#xA;}&#xD;&#xA;" />
</Professionbuddy>